<html>
  <head>
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script>
  </head>

  <body>
    <div id='root'></div>
    <div id='button'></div>
    <script type = 'text/babel'>
    const root = document.querySelector('#root');
    ReactDOM.render(<h1>This is Home Page</h1>, root);

    class App extends React.Component{
      constructor(){
        super();
        this.state = {
          studentName: 'Jack',
          joe: {
              name: 'blank',
              id: '0000'
              }
        };
        this.getJoe = this.getJoe.bind(this);
        this.postMoe = this.postMoe.bind(this);
      }

      async componentDidMount(){
        //const temp = await axios.get('/api/student')
        //const temp = 'John'
        //console.log(temp)

        this.setState( {studentName: (await axios.get('/api/student')).data} )
      }

      async getJoe(){
        console.log('get joe activated');
        this.setState( { joe: (await axios.get('/api/student/Joe')).data})
      }

      async postMoe(){
        console.log('Posting moe activated');
        await axios.post('/api/post', { name: 'Moe'})
      }

      render(){
        const {studentName, joe} = this.state;
        const {getJoe, postMoe} = this;
        return(
          <div>
            <h2> Hello Button </h2>
            <button onClick = {postMoe}> Post Moe's Name </button>
            <hr/>
            <button> Get Student Name </button>
            <p> Student name is {studentName}</p>
            <hr></hr>
            <button onClick = {getJoe}> Get Student Joe's Name </button>
            <p> {joe.name} new ID number is {joe.id}</p>
          </div>

        )
      }
    }

    ReactDOM.render(<App></App>, document.querySelector('#button'))




    </script>
  </body>
</html>
